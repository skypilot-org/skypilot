name: my-task
workdir: .
num_nodes: 4

resources:
  cloud: aws
  accelerators: V100:4
  accelerator_args:
    tf_version: 2.5.0
  use_spot: False
  disk_size: 256
  num_nodes: 4

# file_mounts:
#   /remote/path/datasets: sky

#   /datasets-storage:
#     name: sky-dataset2
#     source: .
#     force_stores: [s3]  # Could be [s3, gcs], [gcs] default: None
#     persistent: True  # Defaults to True, can be set to false.

#   # /datasets-s3: s3://sky-dataset

setup: |
  echo "Begin setup."
  pip install -r requirements.txt
  echo "Setup complete."

run: |
  echo "Beginning task."
  python train.py