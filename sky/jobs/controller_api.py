"""Lightweight API module for managed job controller scripts.

This module provides a minimal-import entry point for scripts generated by
ManagedJobCodeGen that run on managed job controllers. It defers heavy imports
(like SQLAlchemy, cloud SDKs) until the specific functions are actually called,
reducing script startup time.

Usage in generated scripts:
    from sky.jobs import controller_api
    controller_api.dump_managed_job_queue(...)
    controller_api.cancel_jobs_by_id(...)

Instead of:
    from sky.jobs import utils  # Heavy imports at module load
    from sky.jobs import state  # SQLAlchemy imports at module load
"""
# Import directly from the module file to avoid triggering sky.jobs.__init__.py
# which would load heavy dependencies through sky.jobs.client.sdk
from sky.jobs.constants import MANAGED_JOBS_VERSION


# =============================================================================
# Functions from sky.jobs.utils
# =============================================================================

def dump_managed_job_queue(*args, **kwargs):
    """Dump the managed job queue. See sky.jobs.utils.dump_managed_job_queue."""
    # Lazy import to avoid loading heavy dependencies at module load time
    from sky.jobs import utils  # pylint: disable=import-outside-toplevel
    return utils.dump_managed_job_queue(*args, **kwargs)


def cancel_jobs_by_id(*args, **kwargs):
    """Cancel jobs by ID. See sky.jobs.utils.cancel_jobs_by_id."""
    from sky.jobs import utils  # pylint: disable=import-outside-toplevel
    return utils.cancel_jobs_by_id(*args, **kwargs)


def cancel_job_by_name(*args, **kwargs):
    """Cancel job by name. See sky.jobs.utils.cancel_job_by_name."""
    from sky.jobs import utils  # pylint: disable=import-outside-toplevel
    return utils.cancel_job_by_name(*args, **kwargs)


def cancel_jobs_by_pool(*args, **kwargs):
    """Cancel jobs by pool. See sky.jobs.utils.cancel_jobs_by_pool."""
    from sky.jobs import utils  # pylint: disable=import-outside-toplevel
    return utils.cancel_jobs_by_pool(*args, **kwargs)


def stream_logs(*args, **kwargs):
    """Stream logs. See sky.jobs.utils.stream_logs."""
    from sky.jobs import utils  # pylint: disable=import-outside-toplevel
    return utils.stream_logs(*args, **kwargs)


# =============================================================================
# Functions from sky.jobs.state
# =============================================================================

def get_all_job_ids_by_name(*args, **kwargs):
    """Get all job IDs by name. See sky.jobs.state.get_all_job_ids_by_name."""
    from sky.jobs import state  # pylint: disable=import-outside-toplevel
    return state.get_all_job_ids_by_name(*args, **kwargs)


def set_job_info(*args, **kwargs):
    """Set job info. See sky.jobs.state.set_job_info."""
    from sky.jobs import state  # pylint: disable=import-outside-toplevel
    return state.set_job_info(*args, **kwargs)


def set_pending(*args, **kwargs):
    """Set job as pending. See sky.jobs.state.set_pending."""
    from sky.jobs import state  # pylint: disable=import-outside-toplevel
    return state.set_pending(*args, **kwargs)
