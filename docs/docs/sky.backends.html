
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sky.backends package &#8212; Sky 0.1 documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Sky 0.1 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="getting-started/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="getting-started/quickstart.html">
   Quickstart
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="getting-started/tutorial.html">
   Tutorial: DNN Training
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Use Cases
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="examples/auto-failover.html">
   Auto-provisioning GPUs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="examples/iterative-dev-project.html">
   Iteratively Developing a Project
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="examples/launch-many-tasks-vm.html">
   Launch Multiple Tasks on a VM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="examples/grid-search.html">
   Grid Search
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="examples/distributed-jobs.html">
   Distributed Jobs on many VMs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference Documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="reference/interactive-nodes.html">
   Interactive Nodes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="reference/iterative-development.html">
   Iterative Development
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="reference/storage.html">
   Storage
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="reference/job-queue.html">
   Job Queue
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="reference/cli.html">
   CLI Reference
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/sky.backends.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.backend">
   sky.backends.backend module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.backend_utils">
   sky.backends.backend_utils module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.cloud_vm_ray_backend">
   sky.backends.cloud_vm_ray_backend module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.docker_utils">
   sky.backends.docker_utils module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.local_docker_backend">
   sky.backends.local_docker_backend module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends">
   Module contents
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>sky.backends package</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.backend">
   sky.backends.backend module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.backend_utils">
   sky.backends.backend_utils module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.cloud_vm_ray_backend">
   sky.backends.cloud_vm_ray_backend module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.docker_utils">
   sky.backends.docker_utils module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends.local_docker_backend">
   sky.backends.local_docker_backend module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-sky.backends">
   Module contents
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="sky-backends-package">
<h1>sky.backends package<a class="headerlink" href="#sky-backends-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-sky.backends.backend">
<span id="sky-backends-backend-module"></span><h2>sky.backends.backend module<a class="headerlink" href="#module-sky.backends.backend" title="Permalink to this headline">¶</a></h2>
<p>Sky backend interface.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.backend.Backend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.backend.</span></span><span class="sig-name descname"><span class="pre">Backend</span></span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Backend interface: handles provisioning, setup, and scheduling.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'backend'</span></em><a class="headerlink" href="#sky.backends.backend.Backend.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.ResourceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ResourceHandle</span></span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.ResourceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.ResourceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.ResourceHandle.get_cluster_name">
<span class="sig-name descname"><span class="pre">get_cluster_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.ResourceHandle.get_cluster_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.ResourceHandle.get_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.add_storage_objects">
<span class="sig-name descname"><span class="pre">add_storage_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.add_storage_objects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.add_storage_objects" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detach_run</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.execute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>detach_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.post_execute">
<span class="sig-name descname"><span class="pre">post_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">teardown</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.post_execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.post_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Post execute(): e.g., print helpful inspection messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>teardown</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.provision">
<span class="sig-name descname"><span class="pre">provision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.provision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.provision" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.register_info">
<span class="sig-name descname"><span class="pre">register_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.register_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.register_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Register backend-specific information.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.sync_file_mounts">
<span class="sig-name descname"><span class="pre">sync_file_mounts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_file_mounts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cloud_to_remote_file_mounts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.sync_file_mounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.sync_file_mounts" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>all_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>cloud_to_remote_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.sync_workdir">
<span class="sig-name descname"><span class="pre">sync_workdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.sync_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.sync_workdir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.teardown">
<span class="sig-name descname"><span class="pre">teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.teardown" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>terminate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend.Backend.teardown_ephemeral_storage">
<span class="sig-name descname"><span class="pre">teardown_ephemeral_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.teardown_ephemeral_storage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend.Backend.teardown_ephemeral_storage" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-sky.backends.backend_utils">
<span id="sky-backends-backend-utils-module"></span><h2>sky.backends.backend_utils module<a class="headerlink" href="#module-sky.backends.backend_utils" title="Permalink to this headline">¶</a></h2>
<p>Util constants/functions for the backends.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.backend_utils.FileMountHelper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">FileMountHelper</span></span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#FileMountHelper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.FileMountHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Helper for handling file mounts.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.FileMountHelper.make_safe_symlink_command">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_safe_symlink_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_target_commands</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#FileMountHelper.make_safe_symlink_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.FileMountHelper.make_safe_symlink_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a command that safely symlinks ‘source’ to ‘target’.</p>
<p>All intermediate directories of ‘source’ will be owned by $USER,
excluding the root directory (/).</p>
<p>‘source’ must be an absolute path; both ‘source’ and ‘target’ must not
end with a slash (/).</p>
<p>This function is needed because a simple ‘ln -s target source’ may
fail: ‘source’ can have multiple levels (/a/b/c), its parent dirs may
or may not exist, can end with a slash, or may need sudo access, etc.</p>
<p>Cases of &lt;target: local&gt; file mounts and their behaviors:</p>
<blockquote>
<div><dl class="simple">
<dt>/existing_dir: ~/local/dir</dt><dd><ul class="simple">
<li><p>error out saying this cannot be done as LHS already exists</p></li>
</ul>
</dd>
<dt>/existing_file: ~/local/file</dt><dd><ul class="simple">
<li><p>error out saying this cannot be done as LHS already exists</p></li>
</ul>
</dd>
<dt>/existing_symlink: ~/local/file</dt><dd><ul class="simple">
<li><p>overwrite the existing symlink; this is important because sky
run can be run multiple times</p></li>
</ul>
</dd>
</dl>
<p>Paths that start with ~/ and /tmp/ do not have the above
restrictions; just delegate to rsync behaviors.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>download_target_commands</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.FileMountHelper.wrap_file_mount">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wrap_file_mount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#FileMountHelper.wrap_file_mount"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.FileMountHelper.wrap_file_mount" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepends ~/&lt;opaque dir&gt;/ to a path to work around permission issues.</p>
<p>Examples:
/root/hello.txt -&gt; ~/&lt;opaque dir&gt;/root/hello.txt
local.txt -&gt; ~/&lt;opaque dir&gt;/local.txt</p>
<p>After the path is synced, we can later create a symlink to this wrapped
path from the original path, e.g., in the initialization_commands of the
ray autoscaler YAML.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.backend_utils.JobLibCodeGen">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">JobLibCodeGen</span></span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#JobLibCodeGen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.JobLibCodeGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Code generator for job utility functions.</p>
<p>Usage:</p>
<blockquote>
<div><p>&gt;&gt; codegen = JobLibCodeGen()</p>
<p>&gt;&gt; codegen.show_jobs(…)
&gt;&gt; codegen.add_job(…)
&gt;&gt; codegen.&lt;method&gt;(…)</p>
<p>&gt;&gt; code = codegen.build()</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.JobLibCodeGen.add_job">
<span class="sig-name descname"><span class="pre">add_job</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#JobLibCodeGen.add_job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.JobLibCodeGen.add_job" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>username</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>run_timestamp</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.JobLibCodeGen.build">
<span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#JobLibCodeGen.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.JobLibCodeGen.build" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.JobLibCodeGen.cancel_jobs">
<span class="sig-name descname"><span class="pre">cancel_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#JobLibCodeGen.cancel_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.JobLibCodeGen.cancel_jobs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.JobLibCodeGen.get_log_path">
<span class="sig-name descname"><span class="pre">get_log_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#JobLibCodeGen.get_log_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.JobLibCodeGen.get_log_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.JobLibCodeGen.show_jobs">
<span class="sig-name descname"><span class="pre">show_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_jobs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#JobLibCodeGen.show_jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.JobLibCodeGen.show_jobs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>username</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>all_jobs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.JobLibCodeGen.tail_logs">
<span class="sig-name descname"><span class="pre">tail_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#JobLibCodeGen.tail_logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.JobLibCodeGen.tail_logs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SSHConfigHelper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">SSHConfigHelper</span></span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#SSHConfigHelper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.SSHConfigHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Helper for handling local SSH configuration.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SSHConfigHelper.add_cluster">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#SSHConfigHelper.add_cluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.SSHConfigHelper.add_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Add authentication information for cluster to local SSH config file.</p>
<p>If a host with <cite>cluster_name</cite> already exists and the configuration was
not added by sky, then <cite>ip</cite> is used to identify the host instead in the
file.</p>
<p>If a host with <cite>cluster_name</cite> already exists and the configuration was
added by sky (e.g. a spot instance), then the configuration is
overwritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> – Cluster name (see <cite>sky status</cite>)</p></li>
<li><p><strong>ip</strong> – IP address of head node associated with the cluster</p></li>
<li><p><strong>auth_config</strong> – read_yaml(handle.cluster_yaml)[‘auth’]</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>auth_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SSHConfigHelper.remove_cluster">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#SSHConfigHelper.remove_cluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.SSHConfigHelper.remove_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove authentication information for cluster from local SSH config.</p>
<p>If no existing host matching the provided specification is found, then
nothing is removed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> – IP address of a cluster’s head node.</p></li>
<li><p><strong>auth_config</strong> – read_yaml(handle.cluster_yaml)[‘auth’]</p></li>
</ul>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>auth_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SSHConfigHelper.ssh_conf_path">
<span class="sig-name descname"><span class="pre">ssh_conf_path</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'~/.ssh/config'</span></em><a class="headerlink" href="#sky.backends.backend_utils.SSHConfigHelper.ssh_conf_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SshMode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">SshMode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#SshMode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.SshMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>Enum for SSH mode.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SshMode.INTERACTIVE">
<span class="sig-name descname"><span class="pre">INTERACTIVE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#sky.backends.backend_utils.SshMode.INTERACTIVE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SshMode.LOGIN">
<span class="sig-name descname"><span class="pre">LOGIN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#sky.backends.backend_utils.SshMode.LOGIN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.backend_utils.SshMode.NON_INTERACTIVE">
<span class="sig-name descname"><span class="pre">NON_INTERACTIVE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#sky.backends.backend_utils.SshMode.NON_INTERACTIVE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.check_local_gpus">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">check_local_gpus</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#check_local_gpus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.check_local_gpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if GPUs are available locally.</p>
<p>Returns whether GPUs are available on the local machine by checking
if nvidia-smi is installed.</p>
<p>Returns True if nvidia-smi is installed, false if not.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.dump_yaml">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">dump_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#dump_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.dump_yaml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.generate_cluster_name">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">generate_cluster_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#generate_cluster_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.generate_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.get_backend_from_handle">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">get_backend_from_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#get_backend_from_handle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.get_backend_from_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a Backend object corresponding to a handle.</p>
<p>Inspects handle type to infer the backend used for the resource.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#sky.backends.backend.Backend" title="sky.backends.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Backend</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.get_run_timestamp">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">get_run_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#get_run_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.get_run_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.read_yaml">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">read_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#read_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.read_yaml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.run">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.run_command_on_ip_via_ssh">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">run_command_on_ip_via_ssh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssh_user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssh_private_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port_forward</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/dev/null'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssh_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">SshMode.NON_INTERACTIVE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssh_control_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#run_command_on_ip_via_ssh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.run_command_on_ip_via_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses ‘ssh’ to run ‘cmd’ on a node with ip.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> – The IP address of the node.</p></li>
<li><p><strong>cmd</strong> – The command to run.</p></li>
<li><p><strong>ssh_private_key</strong> – The path to the private key to use for ssh.</p></li>
<li><p><strong>ssh_user</strong> – The user to use for ssh.</p></li>
<li><p><strong>port_forward</strong> – A list of ports to forward from the localhost to the</p></li>
<li><p><strong>remote host.</strong></p></li>
<li><p><strong>Advanced options</strong></p></li>
<li><p><strong>log_path</strong> – Redirect stdout/stderr to the log_path.</p></li>
<li><p><strong>stream_logs</strong> – Stream logs to the stdout/stderr.</p></li>
<li><p><strong>check</strong> – Check the success of the command.</p></li>
<li><p><strong>ssh_mode</strong> – The mode to use for ssh.
See SSHMode for more details.</p></li>
<li><p><strong>ssh_control_name</strong> – The files name of the ssh_control to use. This is used
for optimizing the ssh speed.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple of (process, stdout, stderr).</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
<li><p><strong>ssh_user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>ssh_private_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>port_forward</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]]) – </p></li>
<li><p><strong>log_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>check</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>ssh_mode</strong> (<a class="reference internal" href="#sky.backends.backend_utils.SshMode" title="sky.backends.backend_utils.SshMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">SshMode</span></code></a>) – </p></li>
<li><p><strong>ssh_control_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.run_no_outputs">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">run_no_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#run_no_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.run_no_outputs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.ssh_options_list">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">ssh_options_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ssh_private_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssh_control_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#ssh_options_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.ssh_options_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of sane options for ‘ssh’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ssh_private_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>ssh_control_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.wait_until_ray_cluster_ready">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">wait_until_ray_cluster_ready</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cloud</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_config_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#wait_until_ray_cluster_ready"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.wait_until_ray_cluster_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the entire ray cluster is ready.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cloud</strong> (<a class="reference internal" href="sky.clouds.html#sky.clouds.cloud.Cloud" title="sky.clouds.cloud.Cloud"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cloud</span></code></a>) – </p></li>
<li><p><strong>cluster_config_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>num_nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.backend_utils.write_cluster_config">
<span class="sig-prename descclassname"><span class="pre">sky.backends.backend_utils.</span></span><span class="sig-name descname"><span class="pre">write_cluster_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_config_template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zones</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend_utils.html#write_cluster_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.backend_utils.write_cluster_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills in cluster configuration templates and writes them out.</p>
<dl class="simple">
<dt>Returns: {provisioner: path to yaml, the provisioning spec}.</dt><dd><dl class="simple">
<dt>‘provisioner’ can be</dt><dd><ul class="simple">
<li><p>‘ray’</p></li>
<li><p>‘tpu-create-script’ (if TPU is requested)</p></li>
<li><p>‘tpu-delete-script’ (if TPU is requested)</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>num_nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
<li><p><strong>cluster_config_template</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>region</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="sky.clouds.html#sky.clouds.cloud.Region" title="sky.clouds.cloud.Region"><code class="xref py py-class docutils literal notranslate"><span class="pre">Region</span></code></a>]) – </p></li>
<li><p><strong>zones</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="sky.clouds.html#sky.clouds.cloud.Zone" title="sky.clouds.cloud.Zone"><code class="xref py py-class docutils literal notranslate"><span class="pre">Zone</span></code></a>]]) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-sky.backends.cloud_vm_ray_backend">
<span id="sky-backends-cloud-vm-ray-backend-module"></span><h2>sky.backends.cloud_vm_ray_backend module<a class="headerlink" href="#module-sky.backends.cloud_vm_ray_backend" title="Permalink to this headline">¶</a></h2>
<p>Backend: runs on cloud virtual machines, managed by Ray.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.cloud_vm_ray_backend.</span></span><span class="sig-name descname"><span class="pre">CloudVmRayBackend</span></span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sky.backends.backend.Backend" title="sky.backends.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">sky.backends.backend.Backend</span></code></a></p>
<p>Backend: runs on cloud virtual machines, managed by Ray.</p>
<dl class="simple">
<dt>Changing this class may also require updates to:</dt><dd><ul class="simple">
<li><p>Cloud providers’ templates under config/</p></li>
<li><p>Cloud providers’ implementations under clouds/</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'cloudvmray'</span></em><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ResourceHandle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_yaml</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">head_ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launched_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launched_resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tpu_create_script</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tpu_delete_script</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.ResourceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A pickle-able tuple of:</p>
<ul class="simple">
<li><p>(required) Cluster name.</p></li>
<li><p>(required) Path to a cluster.yaml file.</p></li>
<li><dl class="simple">
<dt>(optional) A cached head node public IP.  Filled in after a</dt><dd><p>successful provision().</p>
</dd>
</dl>
</li>
<li><p>(optional) Launched num nodes</p></li>
<li><p>(optional) Launched resources</p></li>
<li><p>(optional) If TPU(s) are managed, a path to a deletion script.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>cluster_yaml</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>head_ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>launched_nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – </p></li>
<li><p><strong>launched_resources</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>]) – </p></li>
<li><p><strong>tpu_create_script</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>tpu_delete_script</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle.get_cluster_name">
<span class="sig-name descname"><span class="pre">get_cluster_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.ResourceHandle.get_cluster_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle.get_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detach_run</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.execute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>detach_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.post_execute">
<span class="sig-name descname"><span class="pre">post_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">teardown</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.post_execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.post_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Post execute(): e.g., print helpful inspection messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>teardown</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.provision">
<span class="sig-name descname"><span class="pre">provision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.provision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.provision" title="Permalink to this definition">¶</a></dt>
<dd><p>Provisions using ‘ray up’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.register_info">
<span class="sig-name descname"><span class="pre">register_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.register_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.register_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Register backend-specific information.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.run_on_head">
<span class="sig-name descname"><span class="pre">run_on_head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port_forward</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/dev/null'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_cached_head_ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssh_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">SshMode.NON_INTERACTIVE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">under_remote_workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.run_on_head"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.run_on_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs ‘cmd’ on the cluster’s head node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>port_forward</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
<li><p><strong>log_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>use_cached_head_ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>check</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>ssh_mode</strong> (<a class="reference internal" href="#sky.backends.backend_utils.SshMode" title="sky.backends.backend_utils.SshMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">SshMode</span></code></a>) – </p></li>
<li><p><strong>under_remote_workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.sync_down_logs">
<span class="sig-name descname"><span class="pre">sync_down_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.sync_down_logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.sync_down_logs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>job_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.sync_file_mounts">
<span class="sig-name descname"><span class="pre">sync_file_mounts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_file_mounts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cloud_to_remote_file_mounts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.sync_file_mounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.sync_file_mounts" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>all_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>cloud_to_remote_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.sync_workdir">
<span class="sig-name descname"><span class="pre">sync_workdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.sync_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.sync_workdir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.tail_logs">
<span class="sig-name descname"><span class="pre">tail_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.tail_logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.tail_logs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>job_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.teardown">
<span class="sig-name descname"><span class="pre">teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.teardown" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>terminate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.teardown_ephemeral_storage">
<span class="sig-name descname"><span class="pre">teardown_ephemeral_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.teardown_ephemeral_storage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.teardown_ephemeral_storage" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RayCodeGen">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.cloud_vm_ray_backend.</span></span><span class="sig-name descname"><span class="pre">RayCodeGen</span></span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RayCodeGen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RayCodeGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Code generator of a Ray program that executes a sky.Task.</p>
<p>Usage:</p>
<blockquote>
<div><p>&gt;&gt; codegen = RayCodegen()
&gt;&gt; codegen.add_prologue()</p>
<p>&gt;&gt; codegen.add_ray_task(…)
&gt;&gt; codegen.add_ray_task(…)</p>
<p>&gt;&gt; codegen.add_epilogue()
&gt;&gt; code = codegen.build()</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RayCodeGen.add_epilogue">
<span class="sig-name descname"><span class="pre">add_epilogue</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RayCodeGen.add_epilogue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RayCodeGen.add_epilogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates code that waits for all tasks, then exits.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RayCodeGen.add_gang_scheduling_placement_group">
<span class="sig-name descname"><span class="pre">add_gang_scheduling_placement_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accelerator_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RayCodeGen.add_gang_scheduling_placement_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RayCodeGen.add_gang_scheduling_placement_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the gang scheduling placement group for a Task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
<li><p><strong>accelerator_dict</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RayCodeGen.add_prologue">
<span class="sig-name descname"><span class="pre">add_prologue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RayCodeGen.add_prologue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RayCodeGen.add_prologue" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>job_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RayCodeGen.add_ray_task">
<span class="sig-name descname"><span class="pre">add_ray_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bash_script</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ray_resources_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gang_scheduling_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RayCodeGen.add_ray_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RayCodeGen.add_ray_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates code for a ray remote task that runs a bash command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bash_script</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>task_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>ray_resources_dict</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>]]) – </p></li>
<li><p><strong>log_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>gang_scheduling_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RayCodeGen.build">
<span class="sig-name descname"><span class="pre">build</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RayCodeGen.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RayCodeGen.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the entire generated program.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RayCodeGen.register_run_fn">
<span class="sig-name descname"><span class="pre">register_run_fn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_fn_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RayCodeGen.register_run_fn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RayCodeGen.register_run_fn" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the run function to be run on the remote cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_fn</strong> – The run function to be run on the remote cluster.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>run_fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>run_fn_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RetryingVmProvisioner">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.cloud_vm_ray_backend.</span></span><span class="sig-name descname"><span class="pre">RetryingVmProvisioner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimize_target</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RetryingVmProvisioner"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RetryingVmProvisioner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A provisioner that retries different cloud/regions/zones.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>dag</strong> (<a class="reference internal" href="sky.html#sky.dag.Dag" title="sky.dag.Dag"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dag</span></code></a>) – </p></li>
<li><p><strong>optimize_target</strong> (<a class="reference internal" href="sky.html#sky.optimizer.OptimizeTarget" title="sky.optimizer.OptimizeTarget"><code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizeTarget</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.cloud_vm_ray_backend.RetryingVmProvisioner.provision_with_retries">
<span class="sig-name descname"><span class="pre">provision_with_retries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#RetryingVmProvisioner.provision_with_retries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.cloud_vm_ray_backend.RetryingVmProvisioner.provision_with_retries" title="Permalink to this definition">¶</a></dt>
<dd><p>Provision with retries for all launchable resources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>num_nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-sky.backends.docker_utils">
<span id="sky-backends-docker-utils-module"></span><h2>sky.backends.docker_utils module<a class="headerlink" href="#module-sky.backends.docker_utils" title="Permalink to this headline">¶</a></h2>
<p>Utilities for docker image generation.</p>
<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.docker_utils.bash_codegen">
<span class="sig-prename descclassname"><span class="pre">sky.backends.docker_utils.</span></span><span class="sig-name descname"><span class="pre">bash_codegen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workdir_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiline_cmds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/docker_utils.html#bash_codegen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.docker_utils.bash_codegen" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>workdir_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>multiline_cmds</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>out_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.docker_utils.build_dockerimage">
<span class="sig-prename descclassname"><span class="pre">sky.backends.docker_utils.</span></span><span class="sig-name descname"><span class="pre">build_dockerimage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/docker_utils.html#build_dockerimage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.docker_utils.build_dockerimage" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a docker image for the given task.</p>
<p>This method is responsible for:
1. Create a temp directory to set the build context.
2. Copy dockerfile to this directory and copy contents
3. Run the dockerbuild</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.docker_utils.build_dockerimage_from_task">
<span class="sig-prename descclassname"><span class="pre">sky.backends.docker_utils.</span></span><span class="sig-name descname"><span class="pre">build_dockerimage_from_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/docker_utils.html#build_dockerimage_from_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.docker_utils.build_dockerimage_from_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a docker image from a Task</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.docker_utils.create_dockerfile">
<span class="sig-prename descclassname"><span class="pre">sky.backends.docker_utils.</span></span><span class="sig-name descname"><span class="pre">create_dockerfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setup_command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">build_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/docker_utils.html#create_dockerfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.docker_utils.create_dockerfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a valid dockerfile to the specified path.</p>
<p>performs three operations:
1. load base_image
2. run some setup commands
3. copy a directory to the image.
the run/entrypoint can be optionally specified in the dockerfile or at
execution time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_image</strong> – base image to inherit from</p></li>
<li><p><strong>setup_command</strong> – commands to run for setup. eg. “pip install numpy &amp;&amp; apt
install htop”</p></li>
<li><p><strong>copy_path</strong> – local path to copy into the image. these are placed in the
root of the container.</p></li>
<li><p><strong>build_dir</strong> – Where to write the dockerfile and setup scripts</p></li>
<li><p><strong>run_command</strong> – cmd argument to the dockerfile. optional - can also be
specified at runtime.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Tuple[dockerfile_contents(str), img_metadata(Dict[str, str])]
dockerfile_contents: contents of the dockerfile
img_metadata: metadata related to the image, propagated to the backend</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>base_image</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>setup_command</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>copy_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>build_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>run_command</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.docker_utils.make_bash_from_multiline">
<span class="sig-prename descclassname"><span class="pre">sky.backends.docker_utils.</span></span><span class="sig-name descname"><span class="pre">make_bash_from_multiline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codegen</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/docker_utils.html#make_bash_from_multiline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.docker_utils.make_bash_from_multiline" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a bash script from a multi-line string of commands.
Automatically includes conda setup prefixes.
:Parameters: <strong>codegen</strong> – str: multiline commands to be converted to a shell script</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>str: str of shell script that can be written to a file</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>script</p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>codegen</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="sky.backends.docker_utils.push_dockerimage">
<span class="sig-prename descclassname"><span class="pre">sky.backends.docker_utils.</span></span><span class="sig-name descname"><span class="pre">push_dockerimage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/docker_utils.html#push_dockerimage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.docker_utils.push_dockerimage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-sky.backends.local_docker_backend">
<span id="sky-backends-local-docker-backend-module"></span><h2>sky.backends.local_docker_backend module<a class="headerlink" href="#module-sky.backends.local_docker_backend" title="Permalink to this headline">¶</a></h2>
<p>Local docker backend for sky</p>
<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.local_docker_backend.</span></span><span class="sig-name descname"><span class="pre">LocalDockerBackend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sky.backends.backend.Backend" title="sky.backends.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">sky.backends.backend.Backend</span></code></a></p>
<p>Local docker backend for debugging.</p>
<p>Ignores resource demands when allocating. Optionally uses GPU if required.</p>
<p>Here’s a correspondence map to help understand how sky concepts map to
Docker concepts:</p>
<ul class="simple">
<li><p>Sky cluster is a Docker container.</p></li>
<li><p>Each task is mapped to a docker image. Docker caches individual layers
of images behind the scenes, so image is built only the first time a task
is run (unless the setup or workdir changes later).</p></li>
<li><p>Provisioning involves building a docker image locally and creating a
container with a sleep task (tail -f /dev/null). (Task run commands are
not used as docker run commands because in docker, once the task exits,
the container also terminates. The sleep task in our implementation keeps
the container alive and allows us to use docker exec to run tasks.)</p></li>
<li><p>Sky tasks are executed in the container (cluster) through docker exec.
I.e., sky.execute calls docker.container.exec</p></li>
<li><p>Sky stop is equivalent to sky down - both terminate the container.</p></li>
</ul>
<p>Some Notes:</p>
<ul class="simple">
<li><p>GPU acceleration is available on containers where supported.</p></li>
<li><p>Since there’s no easy way to track the output of a docker exec command in
detached mode, this backend does not support the <cite>-d</cite> flag (and
consequently, job queue features are also not supported).</p></li>
<li><p>Ctrl+C on a running command kills the process inside the container.
(from the API, it’s possible to let it run in the background. However,
getting logs from the API is tricky)</p></li>
<li><p>This backend requires task.name to be set. This is a hard requirement
because task.name is used as the image tag. Randomly generated task names
aren’t a clean solution because the user’s local docker tag registry would
get littered with multiple names (each time a task is run).</p></li>
<li><p>There’s no notion of resources - this can be constrained if required,
but not implemented currently.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>use_gpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'localdocker'</span></em><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ResourceHandle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.ResourceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
<p>The name of the cluster/container prefixed with the handle prefix.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle.get_cluster_name">
<span class="sig-name descname"><span class="pre">get_cluster_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.ResourceHandle.get_cluster_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle.get_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detach_run</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Launches the container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>detach_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.post_execute">
<span class="sig-name descname"><span class="pre">post_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">teardown</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.post_execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.post_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Post execute(): e.g., print helpful inspection messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>teardown</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.provision">
<span class="sig-name descname"><span class="pre">provision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.provision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.provision" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds docker image for the task and returns the cluster name as handle.</p>
<p>Since resource demands are ignored, There’s no provisioning in local
docker.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.sync_file_mounts">
<span class="sig-name descname"><span class="pre">sync_file_mounts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_file_mounts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cloud_to_remote_file_mounts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.sync_file_mounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.sync_file_mounts" title="Permalink to this definition">¶</a></dt>
<dd><p>File mounts in Docker are implemented with volume mounts (-v).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>all_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>cloud_to_remote_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.sync_workdir">
<span class="sig-name descname"><span class="pre">sync_workdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.sync_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.sync_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Workdir is sync’d by adding to the docker image.</p>
<p>This happens in the execute step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.local_docker_backend.LocalDockerBackend.teardown">
<span class="sig-name descname"><span class="pre">teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.local_docker_backend.LocalDockerBackend.teardown" title="Permalink to this definition">¶</a></dt>
<dd><p>Teardown kills the container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>terminate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-sky.backends">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-sky.backends" title="Permalink to this headline">¶</a></h2>
<p>Sky Backends.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.Backend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.</span></span><span class="sig-name descname"><span class="pre">Backend</span></span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Backend interface: handles provisioning, setup, and scheduling.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.Backend.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'backend'</span></em><a class="headerlink" href="#sky.backends.Backend.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.Backend.ResourceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ResourceHandle</span></span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.ResourceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.ResourceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.ResourceHandle.get_cluster_name">
<span class="sig-name descname"><span class="pre">get_cluster_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.ResourceHandle.get_cluster_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.ResourceHandle.get_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.add_storage_objects">
<span class="sig-name descname"><span class="pre">add_storage_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.add_storage_objects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.add_storage_objects" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detach_run</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.execute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>detach_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.post_execute">
<span class="sig-name descname"><span class="pre">post_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">teardown</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.post_execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.post_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Post execute(): e.g., print helpful inspection messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>teardown</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.provision">
<span class="sig-name descname"><span class="pre">provision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.provision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.provision" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.register_info">
<span class="sig-name descname"><span class="pre">register_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.register_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.register_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Register backend-specific information.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.sync_file_mounts">
<span class="sig-name descname"><span class="pre">sync_file_mounts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_file_mounts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cloud_to_remote_file_mounts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.sync_file_mounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.sync_file_mounts" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>all_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>cloud_to_remote_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.sync_workdir">
<span class="sig-name descname"><span class="pre">sync_workdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.sync_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.sync_workdir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.teardown">
<span class="sig-name descname"><span class="pre">teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.teardown" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.backend.Backend.ResourceHandle" title="sky.backends.backend.Backend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>terminate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.Backend.teardown_ephemeral_storage">
<span class="sig-name descname"><span class="pre">teardown_ephemeral_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/backend.html#Backend.teardown_ephemeral_storage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.Backend.teardown_ephemeral_storage" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.</span></span><span class="sig-name descname"><span class="pre">CloudVmRayBackend</span></span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sky.backends.backend.Backend" title="sky.backends.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">sky.backends.backend.Backend</span></code></a></p>
<p>Backend: runs on cloud virtual machines, managed by Ray.</p>
<dl class="simple">
<dt>Changing this class may also require updates to:</dt><dd><ul class="simple">
<li><p>Cloud providers’ templates under config/</p></li>
<li><p>Cloud providers’ implementations under clouds/</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'cloudvmray'</span></em><a class="headerlink" href="#sky.backends.CloudVmRayBackend.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.ResourceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ResourceHandle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_yaml</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">head_ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launched_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launched_resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tpu_create_script</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tpu_delete_script</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.ResourceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.ResourceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A pickle-able tuple of:</p>
<ul class="simple">
<li><p>(required) Cluster name.</p></li>
<li><p>(required) Path to a cluster.yaml file.</p></li>
<li><dl class="simple">
<dt>(optional) A cached head node public IP.  Filled in after a</dt><dd><p>successful provision().</p>
</dd>
</dl>
</li>
<li><p>(optional) Launched num nodes</p></li>
<li><p>(optional) Launched resources</p></li>
<li><p>(optional) If TPU(s) are managed, a path to a deletion script.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>cluster_yaml</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>head_ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>launched_nodes</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – </p></li>
<li><p><strong>launched_resources</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>]) – </p></li>
<li><p><strong>tpu_create_script</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>tpu_delete_script</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.ResourceHandle.get_cluster_name">
<span class="sig-name descname"><span class="pre">get_cluster_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.ResourceHandle.get_cluster_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.ResourceHandle.get_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detach_run</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.execute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>detach_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.post_execute">
<span class="sig-name descname"><span class="pre">post_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">teardown</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.post_execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.post_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Post execute(): e.g., print helpful inspection messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>teardown</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.provision">
<span class="sig-name descname"><span class="pre">provision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.provision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.provision" title="Permalink to this definition">¶</a></dt>
<dd><p>Provisions using ‘ray up’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.register_info">
<span class="sig-name descname"><span class="pre">register_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.register_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.register_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Register backend-specific information.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.run_on_head">
<span class="sig-name descname"><span class="pre">run_on_head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port_forward</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/dev/null'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_cached_head_ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssh_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">SshMode.NON_INTERACTIVE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">under_remote_workdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.run_on_head"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.run_on_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs ‘cmd’ on the cluster’s head node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>port_forward</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
<li><p><strong>log_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>use_cached_head_ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>check</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>ssh_mode</strong> (<a class="reference internal" href="#sky.backends.backend_utils.SshMode" title="sky.backends.backend_utils.SshMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">SshMode</span></code></a>) – </p></li>
<li><p><strong>under_remote_workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.sync_down_logs">
<span class="sig-name descname"><span class="pre">sync_down_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.sync_down_logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.sync_down_logs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>job_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.sync_file_mounts">
<span class="sig-name descname"><span class="pre">sync_file_mounts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_file_mounts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cloud_to_remote_file_mounts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.sync_file_mounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.sync_file_mounts" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>all_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>cloud_to_remote_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.sync_workdir">
<span class="sig-name descname"><span class="pre">sync_workdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.sync_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.sync_workdir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.tail_logs">
<span class="sig-name descname"><span class="pre">tail_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.tail_logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.tail_logs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>job_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.teardown">
<span class="sig-name descname"><span class="pre">teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.teardown" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle" title="sky.backends.cloud_vm_ray_backend.CloudVmRayBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>terminate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.CloudVmRayBackend.teardown_ephemeral_storage">
<span class="sig-name descname"><span class="pre">teardown_ephemeral_storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/cloud_vm_ray_backend.html#CloudVmRayBackend.teardown_ephemeral_storage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.CloudVmRayBackend.teardown_ephemeral_storage" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sky.backends.</span></span><span class="sig-name descname"><span class="pre">LocalDockerBackend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sky.backends.backend.Backend" title="sky.backends.backend.Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">sky.backends.backend.Backend</span></code></a></p>
<p>Local docker backend for debugging.</p>
<p>Ignores resource demands when allocating. Optionally uses GPU if required.</p>
<p>Here’s a correspondence map to help understand how sky concepts map to
Docker concepts:</p>
<ul class="simple">
<li><p>Sky cluster is a Docker container.</p></li>
<li><p>Each task is mapped to a docker image. Docker caches individual layers
of images behind the scenes, so image is built only the first time a task
is run (unless the setup or workdir changes later).</p></li>
<li><p>Provisioning involves building a docker image locally and creating a
container with a sleep task (tail -f /dev/null). (Task run commands are
not used as docker run commands because in docker, once the task exits,
the container also terminates. The sleep task in our implementation keeps
the container alive and allows us to use docker exec to run tasks.)</p></li>
<li><p>Sky tasks are executed in the container (cluster) through docker exec.
I.e., sky.execute calls docker.container.exec</p></li>
<li><p>Sky stop is equivalent to sky down - both terminate the container.</p></li>
</ul>
<p>Some Notes:</p>
<ul class="simple">
<li><p>GPU acceleration is available on containers where supported.</p></li>
<li><p>Since there’s no easy way to track the output of a docker exec command in
detached mode, this backend does not support the <cite>-d</cite> flag (and
consequently, job queue features are also not supported).</p></li>
<li><p>Ctrl+C on a running command kills the process inside the container.
(from the API, it’s possible to let it run in the background. However,
getting logs from the API is tricky)</p></li>
<li><p>This backend requires task.name to be set. This is a hard requirement
because task.name is used as the image tag. Randomly generated task names
aren’t a clean solution because the user’s local docker tag registry would
get littered with multiple names (each time a task is run).</p></li>
<li><p>There’s no notion of resources - this can be constrained if required,
but not implemented currently.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>use_gpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.NAME">
<span class="sig-name descname"><span class="pre">NAME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'localdocker'</span></em><a class="headerlink" href="#sky.backends.LocalDockerBackend.NAME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.ResourceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ResourceHandle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.ResourceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.ResourceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
<p>The name of the cluster/container prefixed with the handle prefix.</p>
<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.ResourceHandle.get_cluster_name">
<span class="sig-name descname"><span class="pre">get_cluster_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.ResourceHandle.get_cluster_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.ResourceHandle.get_cluster_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detach_run</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Launches the container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>detach_run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.post_execute">
<span class="sig-name descname"><span class="pre">post_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">teardown</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.post_execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.post_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Post execute(): e.g., print helpful inspection messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>teardown</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.provision">
<span class="sig-name descname"><span class="pre">provision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_provision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_logs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.provision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.provision" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds docker image for the task and returns the cluster name as handle.</p>
<p>Since resource demands are ignored, There’s no provisioning in local
docker.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<a class="reference internal" href="sky.html#sky.task.Task" title="sky.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>) – </p></li>
<li><p><strong>to_provision</strong> (<a class="reference internal" href="sky.html#sky.resources.Resources" title="sky.resources.Resources"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resources</span></code></a>) – </p></li>
<li><p><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>stream_logs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>cluster_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.sync_file_mounts">
<span class="sig-name descname"><span class="pre">sync_file_mounts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_file_mounts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cloud_to_remote_file_mounts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.sync_file_mounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.sync_file_mounts" title="Permalink to this definition">¶</a></dt>
<dd><p>File mounts in Docker are implemented with volume mounts (-v).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>all_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p></li>
<li><p><strong>cloud_to_remote_file_mounts</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.sync_workdir">
<span class="sig-name descname"><span class="pre">sync_workdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.sync_workdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.sync_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Workdir is sync’d by adding to the docker image.</p>
<p>This happens in the execute step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>workdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="sky.backends.LocalDockerBackend.teardown">
<span class="sig-name descname"><span class="pre">teardown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sky/backends/local_docker_backend.html#LocalDockerBackend.teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sky.backends.LocalDockerBackend.teardown" title="Permalink to this definition">¶</a></dt>
<dd><p>Teardown kills the container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handle</strong> (<a class="reference internal" href="#sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle" title="sky.backends.local_docker_backend.LocalDockerBackend.ResourceHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceHandle</span></code></a>) – </p></li>
<li><p><strong>terminate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By the Sky authors<br/>
    
        &copy; Copyright 2022, Sky Team.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>