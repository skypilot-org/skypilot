name: storage-demo

resources:
  cloud: aws
  instance_type: m5.2xlarge

num_nodes: 2

file_mounts:
  /sharedfs:
    name: romil-fs
    source: ~/tmp # Empty dir for MVP, this will not be required if mode==MOUNT
    persistent: True
    mode: 'MOUNT'

run: |
  echo This is hostname: $(hostname)
  
  for ((i=1;i<=100;i++)); 
    do 
      # Run example write
      echo ${i}
      echo File ${i}, My hostname: $(hostname) > /sharedfs/$(hostname)_${i}.txt
      sleep 1
    done
  
  
  # ls and exit
  ls -la /sharedfs