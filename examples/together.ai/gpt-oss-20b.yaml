resources:
  accelerators: H100:2

file_mounts:
  /sft: ./sft

num_nodes: 1

setup: |
  conda install cuda -c nvidia -y
  uv venv ~/training --seed --python 3.10
  source ~/training/bin/activate
  uv pip install torch --index-url https://download.pytorch.org/whl/cu128
  uv pip install "trl>=0.20.0" "peft>=0.17.0" "transformers>=4.55.0"
  uv pip install deepspeed
  uv pip install git+https://github.com/huggingface/accelerate.git@c0a3aefea8aa5008a0fbf55b049bd3f0efa9cbf2

  uv pip install nvitop

run: |
  source ~/training/bin/activate

  python /sft/train.py --model_id openai/gpt-oss-20b --enable_lora

  