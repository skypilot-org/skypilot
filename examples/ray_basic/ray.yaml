# This example demonstrates how to use the one-click user-space Ray cluster
# in SkyPilot.
#
# Usage:
#   sky launch -c ray-cluster ray.yaml

resources:
  cpus: 2+

num_nodes: 2

workdir: .

run: |
  ~/skypilot_templates/ray/start_cluster.sh

  if [ "$SKYPILOT_NODE_RANK" == "0" ]; then
    python main.py
  fi
