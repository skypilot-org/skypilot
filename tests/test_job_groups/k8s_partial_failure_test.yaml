# Partial failure test - tests behavior when one job fails while others succeed
---
name: k8s-partial-failure
placement: SAME_INFRA
execution: parallel
---
name: stable-job-1
resources:
  cpus: 2
  infra: kubernetes
run: |
  echo "Stable job 1 starting"
  for i in {1..30}; do
    echo "Stable 1 heartbeat $i"
    sleep 5
  done
  echo "Stable job 1 completed successfully"
---
name: flaky-job
resources:
  cpus: 2
  infra: kubernetes
  job_recovery:
    max_restarts_on_errors: 2
    recover_on_exit_codes: [1]
run: |
  echo "Flaky job starting"
  sleep 30
  echo "Flaky job failing intentionally"
  exit 1
---
name: stable-job-2
resources:
  cpus: 2
  infra: kubernetes
run: |
  echo "Stable job 2 starting"
  for i in {1..30}; do
    echo "Stable 2 heartbeat $i"
    sleep 5
  done
  echo "Stable job 2 completed successfully"
